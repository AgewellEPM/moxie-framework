<UserControl x:Class="SimpleMoxieSwitcher.Views.PINSetupView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="800" d:DesignWidth="1200">

    <Grid Background="#1A1A1A">
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#1A1A1A" Offset="0"/>
                <GradientStop Color="#2D3561" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>

        <Border Background="#2A2A2A" CornerRadius="25" MaxWidth="600" MaxHeight="700"
              HorizontalAlignment="Center" VerticalAlignment="Center" Padding="40">
            <StackPanel>
                <!-- Header -->
                <TextBlock Text="ðŸ”" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,20"/>
                <TextBlock Text="Set Up Parent PIN" FontSize="32" FontWeight="Bold"
                         Foreground="White" HorizontalAlignment="Center"/>
                <TextBlock Text="{Binding InstructionText}" FontSize="16" Foreground="#AAAAAA"
                         HorizontalAlignment="Center" TextAlignment="Center" Margin="0,15,0,40"/>

                <!-- PIN Entry Fields -->
                <StackPanel Visibility="{Binding ShowPinEntry, Converter={StaticResource BoolToVisibilityConverter}}">
                    <!-- Enter PIN -->
                    <TextBlock Text="Enter PIN" Foreground="White" Margin="0,0,0,10"/>
                    <PasswordBox x:Name="PinEntry" PasswordChar="â—" MaxLength="6"
                               FontSize="24" Padding="15" Background="#33FFFFFF" Foreground="White"
                               BorderBrush="#666666" BorderThickness="1"/>

                    <!-- Confirm PIN -->
                    <TextBlock Text="Confirm PIN" Foreground="White" Margin="0,20,0,10"/>
                    <PasswordBox x:Name="PinConfirm" PasswordChar="â—" MaxLength="6"
                               FontSize="24" Padding="15" Background="#33FFFFFF" Foreground="White"
                               BorderBrush="#666666" BorderThickness="1"/>

                    <!-- PIN Requirements -->
                    <Border Background="#22FFFFFF" CornerRadius="10" Padding="15" Margin="0,20,0,0">
                        <StackPanel>
                            <TextBlock Text="PIN Requirements:" FontWeight="Bold" Foreground="White" Margin="0,0,0,10"/>
                            <ItemsControl ItemsSource="{Binding Requirements}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal" Margin="0,3">
                                            <TextBlock Text="{Binding Icon}" Foreground="{Binding Color}" Margin="0,0,8,0"/>
                                            <TextBlock Text="{Binding Text}" Foreground="{Binding Color}"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- Security Questions -->
                <StackPanel Visibility="{Binding ShowSecurityQuestions, Converter={StaticResource BoolToVisibilityConverter}}">
                    <TextBlock Text="Security Questions" FontSize="20" FontWeight="Bold"
                             Foreground="White" Margin="0,0,0,20"/>

                    <TextBlock Text="Question 1" Foreground="#AAAAAA" Margin="0,0,0,5"/>
                    <ComboBox SelectedItem="{Binding SecurityQuestion1}" Margin="0,0,0,10">
                        <ComboBoxItem>What was your first pet's name?</ComboBoxItem>
                        <ComboBoxItem>What city were you born in?</ComboBoxItem>
                        <ComboBoxItem>What is your mother's maiden name?</ComboBoxItem>
                        <ComboBoxItem>What was your first school?</ComboBoxItem>
                    </ComboBox>
                    <TextBox Text="{Binding SecurityAnswer1}" Padding="10" Margin="0,0,0,20"/>

                    <TextBlock Text="Question 2" Foreground="#AAAAAA" Margin="0,0,0,5"/>
                    <ComboBox SelectedItem="{Binding SecurityQuestion2}" Margin="0,0,0,10">
                        <ComboBoxItem>What is your favorite color?</ComboBoxItem>
                        <ComboBoxItem>What was your first car?</ComboBoxItem>
                        <ComboBoxItem>What is your favorite food?</ComboBoxItem>
                        <ComboBoxItem>What street did you grow up on?</ComboBoxItem>
                    </ComboBox>
                    <TextBox Text="{Binding SecurityAnswer2}" Padding="10"/>
                </StackPanel>

                <!-- Success Message -->
                <Border Visibility="{Binding ShowSuccess, Converter={StaticResource BoolToVisibilityConverter}}"
                      Background="#2ECC71" CornerRadius="15" Padding="30">
                    <StackPanel>
                        <TextBlock Text="âœ“" FontSize="48" Foreground="White" HorizontalAlignment="Center"/>
                        <TextBlock Text="PIN Set Successfully!" FontSize="20" FontWeight="Bold"
                                 Foreground="White" HorizontalAlignment="Center" Margin="0,10,0,0"/>
                        <TextBlock Text="Your parent PIN has been created. Please remember it to access parent controls."
                                 Foreground="White" TextAlignment="Center" Margin="0,10,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Error Message -->
                <TextBlock Text="{Binding ErrorMessage}" Foreground="#FF4444"
                         HorizontalAlignment="Center" Margin="0,20,0,0"
                         Visibility="{Binding ShowError, Converter={StaticResource BoolToVisibilityConverter}}"/>

                <!-- Action Buttons -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,40,0,0">
                    <Button Content="{Binding BackButtonText}" Command="{Binding BackCommand}"
                          Padding="20,10" Margin="0,0,10,0"
                          Visibility="{Binding ShowBackButton, Converter={StaticResource BoolToVisibilityConverter}}"/>

                    <Button Content="{Binding NextButtonText}" Command="{Binding NextCommand}"
                          Style="{StaticResource AccentButtonStyle}" Padding="20,10"/>
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>