<UserControl x:Class="SimpleMoxieSwitcher.Views.LearningWizardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="800" d:DesignWidth="1200">

    <Grid Background="#1A1A1A">
        <!-- Background Gradient -->
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#1A1A1A" Offset="0"/>
                <GradientStop Color="#2D4A6B" Offset="0.5"/>
                <GradientStop Color="#1A2A3A" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header with Progress -->
            <Border Grid.Row="0"
                    Background="#33000000"
                    Padding="30,20">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock Text="Learning Setup Wizard"
                                 FontSize="32"
                                 FontWeight="Bold"
                                 Foreground="White"/>
                        <TextBlock Text="{Binding CurrentStepDescription}"
                                 FontSize="14"
                                 Foreground="#AAAAAA"
                                 Margin="0,5,0,0"/>
                    </StackPanel>

                    <!-- Step Progress -->
                    <ItemsControl Grid.Column="1"
                                ItemsSource="{Binding WizardSteps}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Horizontal"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Grid Margin="10,0">
                                    <Ellipse Width="40"
                                           Height="40"
                                           Fill="{Binding BackgroundColor}"
                                           Stroke="{Binding BorderColor}"
                                           StrokeThickness="2"/>
                                    <TextBlock Text="{Binding StepNumber}"
                                             HorizontalAlignment="Center"
                                             VerticalAlignment="Center"
                                             Foreground="White"
                                             FontWeight="Bold"/>
                                </Grid>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </Grid>
            </Border>

            <!-- Content Area -->
            <ScrollViewer Grid.Row="1"
                        VerticalScrollBarVisibility="Auto">
                <ContentControl Content="{Binding CurrentStepContent}"
                              Margin="50">
                    <ContentControl.Resources>
                        <!-- Step 1: Learning Goals -->
                        <DataTemplate x:Key="Step1Template">
                            <StackPanel>
                                <TextBlock Text="What are your learning goals?"
                                         FontSize="28"
                                         FontWeight="Bold"
                                         Foreground="White"
                                         HorizontalAlignment="Center"
                                         Margin="0,0,0,40"/>

                                <ItemsControl ItemsSource="{Binding LearningGoals}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <WrapPanel HorizontalAlignment="Center"/>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <CheckBox IsChecked="{Binding IsSelected}"
                                                    Margin="10">
                                                <Border Background="#22FFFFFF"
                                                      BorderBrush="{Binding BorderColor}"
                                                      BorderThickness="2"
                                                      CornerRadius="15"
                                                      Width="220"
                                                      Height="150"
                                                      Padding="20">
                                                    <StackPanel>
                                                        <TextBlock Text="{Binding Icon}"
                                                                 FontSize="48"
                                                                 HorizontalAlignment="Center"
                                                                 Margin="0,0,0,10"/>
                                                        <TextBlock Text="{Binding Title}"
                                                                 FontSize="16"
                                                                 FontWeight="Bold"
                                                                 Foreground="White"
                                                                 HorizontalAlignment="Center"
                                                                 TextAlignment="Center"/>
                                                        <TextBlock Text="{Binding Description}"
                                                                 FontSize="12"
                                                                 Foreground="#AAAAAA"
                                                                 HorizontalAlignment="Center"
                                                                 TextAlignment="Center"
                                                                 Margin="0,5,0,0"/>
                                                    </StackPanel>
                                                </Border>
                                            </CheckBox>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                        </DataTemplate>

                        <!-- Step 2: Subject Selection -->
                        <DataTemplate x:Key="Step2Template">
                            <StackPanel>
                                <TextBlock Text="Which subjects interest you?"
                                         FontSize="28"
                                         FontWeight="Bold"
                                         Foreground="White"
                                         HorizontalAlignment="Center"
                                         Margin="0,0,0,40"/>

                                <ItemsControl ItemsSource="{Binding Subjects}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <UniformGrid Columns="4"/>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <CheckBox IsChecked="{Binding IsSelected}"
                                                    Margin="10">
                                                <Border Background="{Binding BackgroundColor}"
                                                      CornerRadius="15"
                                                      Width="200"
                                                      Height="120"
                                                      Padding="15">
                                                    <Grid>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="*"/>
                                                            <RowDefinition Height="Auto"/>
                                                        </Grid.RowDefinitions>

                                                        <TextBlock Grid.Row="0"
                                                                 Text="{Binding Icon}"
                                                                 FontSize="36"
                                                                 HorizontalAlignment="Center"
                                                                 VerticalAlignment="Center"/>

                                                        <TextBlock Grid.Row="1"
                                                                 Text="{Binding Name}"
                                                                 FontSize="14"
                                                                 FontWeight="SemiBold"
                                                                 Foreground="White"
                                                                 HorizontalAlignment="Center"/>
                                                    </Grid>
                                                </Border>
                                            </CheckBox>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                        </DataTemplate>

                        <!-- Step 3: Difficulty Level -->
                        <DataTemplate x:Key="Step3Template">
                            <StackPanel>
                                <TextBlock Text="Select your starting difficulty"
                                         FontSize="28"
                                         FontWeight="Bold"
                                         Foreground="White"
                                         HorizontalAlignment="Center"
                                         Margin="0,0,0,40"/>

                                <ItemsControl ItemsSource="{Binding DifficultyLevels}"
                                            HorizontalAlignment="Center">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel Orientation="Horizontal"/>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <RadioButton GroupName="Difficulty"
                                                       IsChecked="{Binding IsSelected}"
                                                       Margin="15">
                                                <Border Background="{Binding BackgroundColor}"
                                                      CornerRadius="20"
                                                      Width="180"
                                                      Height="250"
                                                      Padding="20">
                                                    <StackPanel>
                                                        <TextBlock Text="{Binding Icon}"
                                                                 FontSize="60"
                                                                 HorizontalAlignment="Center"
                                                                 Margin="0,0,0,15"/>
                                                        <TextBlock Text="{Binding Name}"
                                                                 FontSize="20"
                                                                 FontWeight="Bold"
                                                                 Foreground="White"
                                                                 HorizontalAlignment="Center"
                                                                 Margin="0,0,0,10"/>
                                                        <TextBlock Text="{Binding Description}"
                                                                 FontSize="12"
                                                                 Foreground="#AAAAAA"
                                                                 TextAlignment="Center"
                                                                 TextWrapping="Wrap"
                                                                 Margin="0,0,0,10"/>
                                                        <ItemsControl ItemsSource="{Binding Features}">
                                                            <ItemsControl.ItemTemplate>
                                                                <DataTemplate>
                                                                    <TextBlock Text="{Binding}"
                                                                             FontSize="11"
                                                                             Foreground="#CCCCCC"
                                                                             Margin="0,2"/>
                                                                </DataTemplate>
                                                            </ItemsControl.ItemTemplate>
                                                        </ItemsControl>
                                                    </StackPanel>
                                                </Border>
                                            </RadioButton>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                        </DataTemplate>

                        <!-- Step 4: Schedule -->
                        <DataTemplate x:Key="Step4Template">
                            <StackPanel>
                                <TextBlock Text="When would you like to learn?"
                                         FontSize="28"
                                         FontWeight="Bold"
                                         Foreground="White"
                                         HorizontalAlignment="Center"
                                         Margin="0,0,0,40"/>

                                <Border Background="#22FFFFFF"
                                      CornerRadius="20"
                                      Padding="30"
                                      MaxWidth="600">
                                    <StackPanel>
                                        <!-- Daily Goal -->
                                        <TextBlock Text="Daily Learning Goal"
                                                 FontSize="18"
                                                 FontWeight="Bold"
                                                 Foreground="White"
                                                 Margin="0,0,0,15"/>

                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="100"/>
                                            </Grid.ColumnDefinitions>

                                            <Slider Grid.Column="0"
                                                  Value="{Binding DailyMinutes}"
                                                  Minimum="5"
                                                  Maximum="120"
                                                  TickFrequency="15"
                                                  TickPlacement="BottomRight"/>

                                            <Border Grid.Column="1"
                                                  Background="#33000000"
                                                  CornerRadius="10"
                                                  Padding="10"
                                                  Margin="10,0,0,0">
                                                <TextBlock Text="{Binding DailyMinutes, StringFormat='{}{0} min/day'}"
                                                         Foreground="White"
                                                         HorizontalAlignment="Center"/>
                                            </Border>
                                        </Grid>

                                        <!-- Preferred Times -->
                                        <TextBlock Text="Preferred Learning Times"
                                                 FontSize="18"
                                                 FontWeight="Bold"
                                                 Foreground="White"
                                                 Margin="0,30,0,15"/>

                                        <WrapPanel>
                                            <CheckBox Content="Morning (6AM-12PM)"
                                                    IsChecked="{Binding PreferMorning}"
                                                    Foreground="White"
                                                    Margin="10"/>
                                            <CheckBox Content="Afternoon (12PM-5PM)"
                                                    IsChecked="{Binding PreferAfternoon}"
                                                    Foreground="White"
                                                    Margin="10"/>
                                            <CheckBox Content="Evening (5PM-9PM)"
                                                    IsChecked="{Binding PreferEvening}"
                                                    Foreground="White"
                                                    Margin="10"/>
                                            <CheckBox Content="Night (9PM-12AM)"
                                                    IsChecked="{Binding PreferNight}"
                                                    Foreground="White"
                                                    Margin="10"/>
                                        </WrapPanel>

                                        <!-- Reminder Settings -->
                                        <CheckBox Content="Enable learning reminders"
                                                IsChecked="{Binding EnableReminders}"
                                                Foreground="White"
                                                FontSize="16"
                                                Margin="0,20,0,0"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </DataTemplate>

                        <!-- Step 5: Review -->
                        <DataTemplate x:Key="Step5Template">
                            <StackPanel>
                                <TextBlock Text="Review Your Settings"
                                         FontSize="28"
                                         FontWeight="Bold"
                                         Foreground="White"
                                         HorizontalAlignment="Center"
                                         Margin="0,0,0,40"/>

                                <Border Background="#22FFFFFF"
                                      CornerRadius="20"
                                      Padding="30"
                                      MaxWidth="700">
                                    <StackPanel>
                                        <!-- Summary Items -->
                                        <ItemsControl ItemsSource="{Binding SettingsSummary}">
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <Border Background="#1A000000"
                                                          CornerRadius="10"
                                                          Padding="15"
                                                          Margin="0,0,0,15">
                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="Auto"/>
                                                                <ColumnDefinition Width="*"/>
                                                            </Grid.ColumnDefinitions>

                                                            <TextBlock Grid.Column="0"
                                                                     Text="{Binding Icon}"
                                                                     FontSize="24"
                                                                     Margin="0,0,15,0"
                                                                     VerticalAlignment="Center"/>

                                                            <StackPanel Grid.Column="1">
                                                                <TextBlock Text="{Binding Category}"
                                                                         FontSize="12"
                                                                         Foreground="#AAAAAA"/>
                                                                <TextBlock Text="{Binding Value}"
                                                                         FontSize="16"
                                                                         Foreground="White"
                                                                         FontWeight="SemiBold"/>
                                                            </StackPanel>
                                                        </Grid>
                                                    </Border>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>

                                        <TextBlock Text="Ready to start your learning journey!"
                                                 FontSize="18"
                                                 Foreground="#00CED1"
                                                 HorizontalAlignment="Center"
                                                 Margin="0,20,0,0"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </DataTemplate>
                    </ContentControl.Resources>
                </ContentControl>
            </ScrollViewer>

            <!-- Navigation Buttons -->
            <Border Grid.Row="2"
                    Background="#22000000"
                    BorderBrush="#333333"
                    BorderThickness="0,1,0,0"
                    Padding="30,20">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <Button Grid.Column="0"
                          Content="Cancel"
                          Command="{Binding CancelCommand}"
                          Padding="20,10"
                          Background="#AA4444"/>

                    <Button Grid.Column="2"
                          Content="Previous"
                          Command="{Binding PreviousCommand}"
                          IsEnabled="{Binding CanGoPrevious}"
                          Padding="20,10"
                          Margin="0,0,10,0"/>

                    <Button Grid.Column="3"
                          Content="{Binding NextButtonText}"
                          Command="{Binding NextCommand}"
                          IsEnabled="{Binding CanGoNext}"
                          Style="{StaticResource AccentButtonStyle}"
                          Padding="20,10">
                        <Button.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="#00CED1" Offset="0"/>
                                <GradientStop Color="#00FFFF" Offset="1"/>
                            </LinearGradientBrush>
                        </Button.Background>
                    </Button>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</UserControl>