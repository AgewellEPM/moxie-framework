<UserControl x:Class="SimpleMoxieSwitcher.Views.UsageView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="800" d:DesignWidth="1200">

    <Grid Background="#1A1A1A">
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#1A1A1A" Offset="0"/>
                <GradientStop Color="#0F3460" Offset="0.5"/>
                <GradientStop Color="#1A1A1A" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>

        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <Grid Margin="30">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Header -->
                <Border Grid.Row="0" Background="#33000000" CornerRadius="20" Padding="30" Margin="0,0,0,30">
                    <Grid>
                        <StackPanel>
                            <TextBlock Text="ðŸ“Š Usage Analytics" FontSize="32" FontWeight="Bold" Foreground="White"/>
                            <TextBlock Text="Track and analyze Moxie interactions" FontSize="14"
                                     Foreground="#AAAAAA" Margin="0,5,0,0"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <ComboBox SelectedItem="{Binding TimeRange}" Width="150" Margin="0,0,10,0">
                                <ComboBoxItem>Today</ComboBoxItem>
                                <ComboBoxItem>This Week</ComboBoxItem>
                                <ComboBoxItem>This Month</ComboBoxItem>
                                <ComboBoxItem>All Time</ComboBoxItem>
                            </ComboBox>
                            <Button Content="Export Report" Command="{Binding ExportCommand}" Padding="15,8"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Summary Cards -->
                <Grid Grid.Row="1" Margin="0,0,0,30">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>

                    <!-- Total Time -->
                    <Border Grid.Column="0" Background="#22FFFFFF" CornerRadius="15" Padding="20" Margin="5,0">
                        <StackPanel>
                            <TextBlock Text="â±ï¸" FontSize="32" HorizontalAlignment="Center"/>
                            <TextBlock Text="{Binding TotalTime}" FontSize="28" FontWeight="Bold"
                                     Foreground="#00CED1" HorizontalAlignment="Center" Margin="0,10,0,0"/>
                            <TextBlock Text="Total Time" Foreground="#AAAAAA" HorizontalAlignment="Center"/>
                            <TextBlock Text="{Binding TotalTimeChange}" FontSize="12" Foreground="{Binding TotalTimeChangeColor}"
                                     HorizontalAlignment="Center" Margin="0,5,0,0"/>
                        </StackPanel>
                    </Border>

                    <!-- Sessions -->
                    <Border Grid.Column="1" Background="#22FFFFFF" CornerRadius="15" Padding="20" Margin="5,0">
                        <StackPanel>
                            <TextBlock Text="ðŸ’¬" FontSize="32" HorizontalAlignment="Center"/>
                            <TextBlock Text="{Binding TotalSessions}" FontSize="28" FontWeight="Bold"
                                     Foreground="#9B59B6" HorizontalAlignment="Center" Margin="0,10,0,0"/>
                            <TextBlock Text="Sessions" Foreground="#AAAAAA" HorizontalAlignment="Center"/>
                            <TextBlock Text="{Binding SessionsChange}" FontSize="12" Foreground="{Binding SessionsChangeColor}"
                                     HorizontalAlignment="Center" Margin="0,5,0,0"/>
                        </StackPanel>
                    </Border>

                    <!-- Activities -->
                    <Border Grid.Column="2" Background="#22FFFFFF" CornerRadius="15" Padding="20" Margin="5,0">
                        <StackPanel>
                            <TextBlock Text="ðŸŽ¯" FontSize="32" HorizontalAlignment="Center"/>
                            <TextBlock Text="{Binding ActivitiesCompleted}" FontSize="28" FontWeight="Bold"
                                     Foreground="#FFD700" HorizontalAlignment="Center" Margin="0,10,0,0"/>
                            <TextBlock Text="Activities" Foreground="#AAAAAA" HorizontalAlignment="Center"/>
                            <TextBlock Text="{Binding ActivitiesChange}" FontSize="12" Foreground="{Binding ActivitiesChangeColor}"
                                     HorizontalAlignment="Center" Margin="0,5,0,0"/>
                        </StackPanel>
                    </Border>

                    <!-- XP Earned -->
                    <Border Grid.Column="3" Background="#22FFFFFF" CornerRadius="15" Padding="20" Margin="5,0">
                        <StackPanel>
                            <TextBlock Text="â­" FontSize="32" HorizontalAlignment="Center"/>
                            <TextBlock Text="{Binding XPEarned}" FontSize="28" FontWeight="Bold"
                                     Foreground="#2ECC71" HorizontalAlignment="Center" Margin="0,10,0,0"/>
                            <TextBlock Text="XP Earned" Foreground="#AAAAAA" HorizontalAlignment="Center"/>
                            <TextBlock Text="{Binding XPChange}" FontSize="12" Foreground="{Binding XPChangeColor}"
                                     HorizontalAlignment="Center" Margin="0,5,0,0"/>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- Charts -->
                <Grid Grid.Row="2" Margin="0,0,0,30">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Usage Chart -->
                    <Border Grid.Column="0" Background="#22FFFFFF" CornerRadius="15" Padding="20" Margin="0,0,15,0">
                        <StackPanel>
                            <TextBlock Text="Daily Usage" FontSize="18" FontWeight="Bold" Foreground="White" Margin="0,0,0,15"/>

                            <Border Background="#1A000000" CornerRadius="10" Height="250" Padding="20">
                                <ItemsControl ItemsSource="{Binding DailyUsageBars}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <UniformGrid Rows="1"/>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Grid Margin="5">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="*"/>
                                                    <RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>

                                                <Border Grid.Row="0" Background="#333333" CornerRadius="5"
                                                      VerticalAlignment="Bottom" Height="200">
                                                    <Border Background="{Binding Color}" CornerRadius="5"
                                                          VerticalAlignment="Bottom" Height="{Binding Height}"/>
                                                </Border>

                                                <TextBlock Grid.Row="1" Text="{Binding Day}" HorizontalAlignment="Center"
                                                         Foreground="#AAAAAA" FontSize="12" Margin="0,5,0,0"/>
                                            </Grid>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </Border>
                        </StackPanel>
                    </Border>

                    <!-- Activity Breakdown -->
                    <Border Grid.Column="1" Background="#22FFFFFF" CornerRadius="15" Padding="20">
                        <StackPanel>
                            <TextBlock Text="Activity Breakdown" FontSize="18" FontWeight="Bold" Foreground="White" Margin="0,0,0,15"/>

                            <ItemsControl ItemsSource="{Binding ActivityBreakdown}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="#1A000000" CornerRadius="10" Padding="15" Margin="0,5">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="Auto"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>

                                                <TextBlock Grid.Column="0" Text="{Binding Icon}" FontSize="20"
                                                         Margin="0,0,10,0" VerticalAlignment="Center"/>

                                                <StackPanel Grid.Column="1">
                                                    <TextBlock Text="{Binding Name}" Foreground="White" FontWeight="SemiBold"/>
                                                    <ProgressBar Value="{Binding Percentage}" Maximum="100"
                                                               Height="6" Foreground="{Binding Color}"
                                                               Background="#333333" Margin="0,5,0,0"/>
                                                </StackPanel>

                                                <TextBlock Grid.Column="2" Text="{Binding Percentage, StringFormat='{}{0}%'}"
                                                         Foreground="{Binding Color}" FontWeight="Bold"
                                                         VerticalAlignment="Center" Margin="10,0,0,0"/>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- Detailed Stats -->
                <Border Grid.Row="3" Background="#22FFFFFF" CornerRadius="15" Padding="20">
                    <StackPanel>
                        <TextBlock Text="Detailed Statistics" FontSize="18" FontWeight="Bold" Foreground="White" Margin="0,0,0,15"/>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>

                            <!-- Learning Stats -->
                            <StackPanel Grid.Column="0" Margin="0,0,20,0">
                                <TextBlock Text="Learning" FontWeight="Bold" Foreground="#00CED1" Margin="0,0,0,10"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition/><RowDefinition/><RowDefinition/><RowDefinition/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Lessons Completed" Foreground="#AAAAAA"/>
                                    <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding LessonsCompleted}" Foreground="White" FontWeight="Bold"/>

                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Quizzes Taken" Foreground="#AAAAAA" Margin="0,5,0,0"/>
                                    <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding QuizzesTaken}" Foreground="White" FontWeight="Bold" Margin="0,5,0,0"/>

                                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Average Score" Foreground="#AAAAAA" Margin="0,5,0,0"/>
                                    <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding AverageScore}" Foreground="White" FontWeight="Bold" Margin="0,5,0,0"/>

                                    <TextBlock Grid.Row="3" Grid.Column="0" Text="Skills Mastered" Foreground="#AAAAAA" Margin="0,5,0,0"/>
                                    <TextBlock Grid.Row="3" Grid.Column="1" Text="{Binding SkillsMastered}" Foreground="White" FontWeight="Bold" Margin="0,5,0,0"/>
                                </Grid>
                            </StackPanel>

                            <!-- Social Stats -->
                            <StackPanel Grid.Column="1" Margin="0,0,20,0">
                                <TextBlock Text="Social & Emotional" FontWeight="Bold" Foreground="#9B59B6" Margin="0,0,0,10"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition/><RowDefinition/><RowDefinition/><RowDefinition/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Conversations" Foreground="#AAAAAA"/>
                                    <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding ConversationCount}" Foreground="White" FontWeight="Bold"/>

                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Avg Duration" Foreground="#AAAAAA" Margin="0,5,0,0"/>
                                    <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding AvgConversationDuration}" Foreground="White" FontWeight="Bold" Margin="0,5,0,0"/>

                                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Emotions Shared" Foreground="#AAAAAA" Margin="0,5,0,0"/>
                                    <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding EmotionsShared}" Foreground="White" FontWeight="Bold" Margin="0,5,0,0"/>

                                    <TextBlock Grid.Row="3" Grid.Column="0" Text="Empathy Moments" Foreground="#AAAAAA" Margin="0,5,0,0"/>
                                    <TextBlock Grid.Row="3" Grid.Column="1" Text="{Binding EmpathyMoments}" Foreground="White" FontWeight="Bold" Margin="0,5,0,0"/>
                                </Grid>
                            </StackPanel>

                            <!-- Game Stats -->
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Games & Activities" FontWeight="Bold" Foreground="#FFD700" Margin="0,0,0,10"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition/><RowDefinition/><RowDefinition/><RowDefinition/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Games Played" Foreground="#AAAAAA"/>
                                    <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding GamesPlayed}" Foreground="White" FontWeight="Bold"/>

                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="High Scores" Foreground="#AAAAAA" Margin="0,5,0,0"/>
                                    <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding HighScores}" Foreground="White" FontWeight="Bold" Margin="0,5,0,0"/>

                                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Achievements" Foreground="#AAAAAA" Margin="0,5,0,0"/>
                                    <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding AchievementsUnlocked}" Foreground="White" FontWeight="Bold" Margin="0,5,0,0"/>

                                    <TextBlock Grid.Row="3" Grid.Column="0" Text="Challenges Won" Foreground="#AAAAAA" Margin="0,5,0,0"/>
                                    <TextBlock Grid.Row="3" Grid.Column="1" Text="{Binding ChallengesWon}" Foreground="White" FontWeight="Bold" Margin="0,5,0,0"/>
                                </Grid>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>
            </Grid>
        </ScrollViewer>
    </Grid>
</UserControl>