<UserControl x:Class="SimpleMoxieSwitcher.Views.ParentAuthView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="800" d:DesignWidth="1200">

    <Grid>
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#2C3E50" Offset="0"/>
                <GradientStop Color="#34495E" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>

        <!-- Blur Background -->
        <Border Background="#AA000000"/>

        <!-- Auth Dialog -->
        <Border Background="#2A2A2A" CornerRadius="25" Width="500" Height="600"
              HorizontalAlignment="Center" VerticalAlignment="Center">
            <Border.Effect>
                <DropShadowEffect Color="Black" BlurRadius="30" ShadowDepth="10" Opacity="0.5"/>
            </Border.Effect>

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Header -->
                <Border Grid.Row="0" Background="#1A000000" CornerRadius="25,25,0,0" Padding="30">
                    <StackPanel>
                        <TextBlock Text="ðŸ”’" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,15"/>
                        <TextBlock Text="Parent Authentication" FontSize="28" FontWeight="Bold"
                                 Foreground="White" HorizontalAlignment="Center"/>
                        <TextBlock Text="Enter your PIN to access parent controls"
                                 FontSize="14" Foreground="#AAAAAA" HorizontalAlignment="Center" Margin="0,10,0,0"/>
                    </StackPanel>
                </Border>

                <!-- PIN Entry -->
                <StackPanel Grid.Row="1" VerticalAlignment="Center" Margin="40">
                    <!-- PIN Display -->
                    <ItemsControl ItemsSource="{Binding PinDigits}" HorizontalAlignment="Center">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Horizontal"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Width="60" Height="60" CornerRadius="10" Background="#1A000000"
                                      BorderBrush="#666666" BorderThickness="2" Margin="8,0">
                                    <TextBlock Text="{Binding DisplayChar}" FontSize="32" FontWeight="Bold"
                                             Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>

                    <!-- Error Message -->
                    <TextBlock Text="{Binding ErrorMessage}" Foreground="#FF4444" FontSize="14"
                             HorizontalAlignment="Center" Margin="0,20,0,0"
                             Visibility="{Binding ShowError, Converter={StaticResource BoolToVisibilityConverter}}"/>

                    <!-- Keypad -->
                    <Grid Margin="0,40,0,0" HorizontalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition/><RowDefinition/><RowDefinition/><RowDefinition/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/><ColumnDefinition/><ColumnDefinition/>
                        </Grid.ColumnDefinitions>

                        <!-- Number Buttons 1-9 -->
                        <Button Grid.Row="0" Grid.Column="0" Content="1" Command="{Binding EnterDigitCommand}" CommandParameter="1"/>
                        <Button Grid.Row="0" Grid.Column="1" Content="2" Command="{Binding EnterDigitCommand}" CommandParameter="2"/>
                        <Button Grid.Row="0" Grid.Column="2" Content="3" Command="{Binding EnterDigitCommand}" CommandParameter="3"/>
                        <Button Grid.Row="1" Grid.Column="0" Content="4" Command="{Binding EnterDigitCommand}" CommandParameter="4"/>
                        <Button Grid.Row="1" Grid.Column="1" Content="5" Command="{Binding EnterDigitCommand}" CommandParameter="5"/>
                        <Button Grid.Row="1" Grid.Column="2" Content="6" Command="{Binding EnterDigitCommand}" CommandParameter="6"/>
                        <Button Grid.Row="2" Grid.Column="0" Content="7" Command="{Binding EnterDigitCommand}" CommandParameter="7"/>
                        <Button Grid.Row="2" Grid.Column="1" Content="8" Command="{Binding EnterDigitCommand}" CommandParameter="8"/>
                        <Button Grid.Row="2" Grid.Column="2" Content="9" Command="{Binding EnterDigitCommand}" CommandParameter="9"/>

                        <!-- Special Buttons -->
                        <Button Grid.Row="3" Grid.Column="0" Content="âŒ«" Command="{Binding BackspaceCommand}"/>
                        <Button Grid.Row="3" Grid.Column="1" Content="0" Command="{Binding EnterDigitCommand}" CommandParameter="0"/>
                        <Button Grid.Row="3" Grid.Column="2" Content="âœ“" Command="{Binding SubmitCommand}" Background="#00CED1"/>

                        <!-- Button Style -->
                        <Grid.Resources>
                            <Style TargetType="Button">
                                <Setter Property="Width" Value="70"/>
                                <Setter Property="Height" Value="70"/>
                                <Setter Property="Margin" Value="5"/>
                                <Setter Property="FontSize" Value="24"/>
                                <Setter Property="FontWeight" Value="Bold"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" CornerRadius="15"
                                                  BorderBrush="#666666" BorderThickness="1">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Grid.Resources>
                    </Grid>
                </StackPanel>

                <!-- Footer -->
                <StackPanel Grid.Row="2" Margin="30">
                    <Button Content="Cancel" Command="{Binding CancelCommand}"
                          HorizontalAlignment="Center" Padding="30,10" Background="#AA4444"/>

                    <Button Content="Forgot PIN?" Command="{Binding ForgotPinCommand}"
                          Background="Transparent" BorderThickness="0" Foreground="#00CED1"
                          HorizontalAlignment="Center" Margin="0,15,0,0"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</UserControl>